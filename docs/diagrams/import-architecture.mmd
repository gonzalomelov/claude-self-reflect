flowchart TB
    subgraph "Real-Time Import System"
        NewFile([New/Modified<br/>Conversation]) --> Watcher{Streaming<br/>Watcher}
        
        Watcher -->|Every 60s| Check[Check Files]
        Check --> Priority{File Age?}
        
        Priority -->|< 5 min| Hot[üî• HOT<br/>2-sec mode]
        Priority -->|< 24 hr| Warm[üå°Ô∏è WARM<br/>Normal]
        Priority -->|> 24 hr| Cold[‚ùÑÔ∏è COLD<br/>Batch-5]
        
        Hot --> FastMode[Fast Mode<br/>2-sec intervals<br/>Can interrupt]
        Warm --> NormalMode[Normal Mode<br/>60-sec intervals]
        Cold --> BatchMode[Batch Mode<br/>Max 5 files]
        
        FastMode --> Import{Import<br/>Strategy}
        NormalMode --> Import
        BatchMode --> Import
        
        Import -->|Never seen| Full[Baseline Import<br/>From start]
        Import -->|Gap > 100 lines| Catchup[Catch-up Import<br/>From position]
        Import -->|Small changes| Stream[Stream Import<br/>Continue]
        
        Full --> Process[Process<br/>& Embed]
        Catchup --> Process
        Stream --> Process
        
        Process --> Memory{Memory<br/>< 50MB?}
        Memory -->|Yes| Store[(Qdrant<br/>Vector DB)]
        Memory -->|No| GC[Garbage<br/>Collect]
        
        GC --> Store
        Store --> State[Update State]
        State --> Wait[Wait for<br/>next cycle]
        Wait --> Watcher
        
        style Hot fill:#ff6b6b
        style Warm fill:#ffd93d
        style Cold fill:#6bcf7f
        style FastMode stroke:#ff6b6b,stroke-width:3px
    end